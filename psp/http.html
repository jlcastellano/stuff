<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocolo HTTP en Java</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            color: #333;
        }

        h1, h2, h3 {
            color: #2c3e50;
        }

        .container {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .intro-box {
            background-color: #e3f2fd;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 5px solid #1976d2;
        }

        .methods-box {
            background-color: #f3e5f5;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 5px solid #7b1fa2;
        }

        .headers-box {
            background-color: #e8f5e9;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 5px solid #388e3c;
        }

        .status-box {
            background-color: #fff3e0;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 5px solid #e65100;
        }

        pre {
            background-color: #f1f1f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }

        code {
            font-family: 'Courier New', Courier, monospace;
        }

        .nota {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 10px;
            margin: 10px 0;
        }

        .importante {
            background-color: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 10px;
            margin: 10px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f5f5f5;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            pre {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <h1>Protocolo HTTP en Java</h1>

    <div class="intro-box">
        <h2>Introducción al Protocolo HTTP</h2>
        <p>HTTP (Hypertext Transfer Protocol) es el protocolo fundamental de la World Wide Web. Es un protocolo de la capa de aplicación para la transmisión de documentos hipermedia, como HTML.</p>
        
        <h3>Características Principales</h3>
        <ul>
            <li>Protocolo sin estado (stateless)</li>
            <li>Basado en el modelo cliente-servidor</li>
            <li>Independiente del tipo de datos transmitidos</li>
            <li>Extensible mediante headers</li>
            <li>Soporta diferentes métodos de petición</li>
        </ul>
    </div>

    <div class="methods-box">
        <h3>Métodos HTTP</h3>
        <table>
            <tr>
                <th>Método</th>
                <th>Descripción</th>
                <th>Uso Típico</th>
            </tr>
            <tr>
                <td>GET</td>
                <td>Solicitar datos</td>
                <td>Obtener recursos</td>
            </tr>
            <tr>
                <td>POST</td>
                <td>Enviar datos</td>
                <td>Crear recursos</td>
            </tr>
            <tr>
                <td>PUT</td>
                <td>Actualizar/Reemplazar datos</td>
                <td>Actualizar recursos</td>
            </tr>
            <tr>
                <td>DELETE</td>
                <td>Eliminar datos</td>
                <td>Borrar recursos</td>
            </tr>
            <tr>
                <td>PATCH</td>
                <td>Actualizar parcialmente</td>
                <td>Modificar recursos</td>
            </tr>
        </table>

        <h4>Ejemplos de Implementación</h4>
        <pre><code>
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.time.Duration;

public class HTTPExample {
    private final HttpClient httpClient;

    public HTTPExample() {
        this.httpClient = HttpClient.newBuilder()
            .version(HttpClient.Version.HTTP_2)
            .connectTimeout(Duration.ofSeconds(10))
            .build();
    }

    // GET Request
    public String get(String url) throws Exception {
        HttpRequest request = HttpRequest.newBuilder()
            .GET()
            .uri(URI.create(url))
            .header("Accept", "application/json")
            .build();

        HttpResponse<String> response = httpClient.send(
            request, 
            HttpResponse.BodyHandlers.ofString()
        );

        return response.body();
    }

    // POST Request
    public String post(String url, String jsonBody) throws Exception {
        HttpRequest request = HttpRequest.newBuilder()
            .POST(HttpRequest.BodyPublishers.ofString(jsonBody))
            .uri(URI.create(url))
            .header("Content-Type", "application/json")
            .build();

        HttpResponse<String> response = httpClient.send(
            request, 
            HttpResponse.BodyHandlers.ofString()
        );

        return response.body();
    }
}
        </code></pre>
    </div>

    <div class="headers-box">
        <h3>Headers HTTP Comunes</h3>
        <table>
            <tr>
                <th>Header</th>
                <th>Descripción</th>
                <th>Ejemplo</th>
            </tr>
            <tr>
                <td>Content-Type</td>
                <td>Tipo de contenido</td>
                <td>application/json</td>
            </tr>
            <tr>
                <td>Authorization</td>
                <td>Credenciales</td>
                <td>Bearer token123</td>
            </tr>
            <tr>
                <td>Accept</td>
                <td>Tipos aceptados</td>
                <td>application/json</td>
            </tr>
            <tr>
                <td>User-Agent</td>
                <td>Cliente</td>
                <td>Mozilla/5.0</td>
            </tr>
        </table>

        <h4>Ejemplo con Headers Personalizados</h4>
        <pre><code>
public String getWithHeaders(String url) throws Exception {
    HttpRequest request = HttpRequest.newBuilder()
        .GET()
        .uri(URI.create(url))
        .header("Authorization", "Bearer " + token)
        .header("Accept", "application/json")
        .header("User-Agent", "Java HTTP Client")
        .header("Custom-Header", "value")
        .build();

    return httpClient.send(request, HttpResponse.BodyHandlers.ofString()).body();
}
        </code></pre>
    </div>

    <div class="status-box">
        <h3>Códigos de Estado HTTP</h3>
        <table>
            <tr>
                <th>Rango</th>
                <th>Categoría</th>
                <th>Ejemplos</th>
            </tr>
            <tr>
                <td>2xx</td>
                <td>Éxito</td>
                <td>200 OK, 201 Created</td>
            </tr>
            <tr>
                <td>3xx</td>
                <td>Redirección</td>
                <td>301 Moved, 304 Not Modified</td>
            </tr>
            <tr>
                <td>4xx</td>
                <td>Error Cliente</td>
                <td>400 Bad Request, 404 Not Found</td>
            </tr>
            <tr>
                <td>5xx</td>
                <td>Error Servidor</td>
                <td>500 Internal Error, 503 Service Unavailable</td>
            </tr>
        </table>

        <h4>Ejemplo de Manejo de Estados</h4>
        <pre><code>
public void handleResponse(HttpResponse<String> response) {
    int status = response.statusCode();
    
    switch (status) {
        case 200:
            processSuccess(response.body());
            break;
        case 404:
            throw new ResourceNotFoundException("Recurso no encontrado");
        case 401:
            throw new UnauthorizedException("No autorizado");
        case 500:
            throw new ServerException("Error en el servidor");
        default:
            throw new HttpException("Error HTTP: " + status);
    }
}
        </code></pre>
    </div>

    <div class="container">
        <h3>Ejemplos Avanzados</h3>

        <h4>Subida de Archivos</h4>
        <pre><code>
public void uploadFile(String url, Path filePath) throws Exception {
    HttpRequest request = HttpRequest.newBuilder()
        .POST(HttpRequest.BodyPublishers.ofFile(filePath))
        .uri(URI.create(url))
        .header("Content-Type", "application/octet-stream")
        .build();

    HttpResponse<String> response = httpClient.send(
        request, 
        HttpResponse.BodyHandlers.ofString()
    );
}
        </code></pre>

        <h4>Manejo de Cookies</h4>
        <pre><code>
CookieManager cookieManager = new CookieManager();
HttpClient clientWithCookies = HttpClient.newBuilder()
    .cookieHandler(cookieManager)
    .build();
        </code></pre>

        <h4>Solicitudes Asíncronas</h4>
        <pre><code>
public CompletableFuture<String> getAsync(String url) {
    HttpRequest request = HttpRequest.newBuilder()
        .GET()
        .uri(URI.create(url))
        .build();

    return httpClient.sendAsync(
        request, 
        HttpResponse.BodyHandlers.ofString()
    ).thenApply(HttpResponse::body);
}
        </code></pre>
    </div>

    <div class="nota">
        <h3>Mejores Prácticas</h3>
        <ul>
            <li>Usar timeout para evitar bloqueos indefinidos</li>
            <li>Implementar retry mechanism para fallos temporales</li>
            <li>Manejar correctamente los recursos (close)</li>
            <li>Validar las respuestas del servidor</li>
            <li>Usar pooling de conexiones para mejor rendimiento</li>
            <li>Implementar manejo de errores robusto</li>
        </ul>
    </div>

    <div class="container">
        <h3>Seguridad</h3>
        <ul>
            <li>Usar HTTPS siempre que sea posible</li>
            <li>Validar certificados SSL</li>
            <li>No exponer información sensible en URLs</li>
            <li>Implementar rate limiting</li>
            <li>Validar entradas y salidas</li>
            <li>Usar tokens de autenticación de manera segura</li>
        </ul>

        <h4>Ejemplo de Configuración SSL</h4>
        <pre><code>
SSLContext sslContext = SSLContext.getInstance("TLS");
sslContext.init(null, trustAllCerts, new SecureRandom());

HttpClient secureClient = HttpClient.newBuilder()
    .sslContext(sslContext)
    .build();
        </code></pre>
    </div>
    <div class="importante">
        <h3>Dependencias Maven</h3>
        <pre><code>
&lt;!-- Para HTTP Client moderno (Java 11+) --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.httpcomponents.client5&lt;/groupId&gt;
    &lt;artifactId&gt;httpclient5&lt;/artifactId&gt;
    &lt;version&gt;5.2.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- Para manejo de JSON --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
    &lt;version&gt;2.15.2&lt;/version&gt;
&lt;/dependency&gt;
        </code></pre>
    </div>


</body>
</html>